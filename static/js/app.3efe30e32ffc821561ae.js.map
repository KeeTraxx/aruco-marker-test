{"version":3,"sources":["webpack:///./src/lib/WebcamFeed.js","webpack:///./src/lib/CV.js","webpack:///./src/lib/AR.js","webpack:///./src/lib/SVD.js","webpack:///./src/lib/POS.js","webpack:///src/components/ArucoMarker.vue","webpack:///./src/components/ArucoMarker.vue?d8fc","webpack:///./src/components/ArucoMarker.vue","webpack:///src/App.vue","webpack:///./src/App.vue?5d62","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["WebcamFeed","prototype","requestWebcamFeed","navigator","mediaDevices","getUserMedia","audio","video","facingMode","exact","then","stream","lib_WebcamFeed","CV","width","height","data","this","imageSrc","imageDst","src","dst","len","length","i","j","threshold","tab","kernelSize","stackBoxBlur","hist","sum","sumB","wB","wF","max","mu","between","color","next","stackStart","heightMinus1","widthMinus1","size","radius","mult","stackBoxBlurMult","shift","stackBoxBlurShift","stack","pos","start","p","x","y","BlurStack","imageMean","kernel","gaussianKernel","gaussianBlurFilter","horizontal","limit","cur","value","k","center","sigma","scale2X","Math","exp","binary","deltas","contours","pix","nbd","outer","hole","binaryBorder","neighborhoodDeltas","push","borderFollowing","point","contour","pos1","pos3","pos4","s","sEnd","neighborhood","concat","epsilon","slice","start_index","end_index","rightSlice","poly","pt","startPt","endPt","dist","maxDist","leEps","dx","dy","pop","abs","warpSize","m","sx1","sx2","dx1","dx2","sy1","dy1","dy2","p1","p2","p3","p4","r","t","u","v","w","getPerspectiveTransform","rq","square2quad","px","py","sq","den","orientation","convex","curPt","prevPt","dxdy0","dydx0","dx0","dy0","sqrt","min","Infinity","d","square","span","nz","posSrc","posDst","lib_CV","AR","id","corners","grey","Image","thres","homography","polys","candidates","Detector","detect","image","grayscale","adaptiveThreshold","findContours","findCandidates","clockwiseCorners","notTooNear","findMarkers","minSize","minLength","approxPolyDP","isContourConvex","minEdgeLength","swap","minDist","perimeter","tooNear","markers","candidate","marker","warp","otsu","getMarker","minZero","bits","rotations","distances","pair","inc","countNonZero","hammingDistance","first","second","rotate","Marker","mat2id","rotate2","ids","minSum","rotation","lib_AR","SVD","a","n","flag","its","jj","l","nm","anorm","c","f","g","h","scale","z","rv1","sign","pythag","b","at","bt","ct","lib_SVD","POS","modelSize","focalLength","objectPoints","buildModel","objectVectors","objectNormal","objectMatrix","init","Posit","half","np","vectors","row","pseudoInverse","pose","imagePoints","valid1","valid2","posRotation1","posRotation2","posTranslation","rotation1","rotation2","translation1","translation2","error1","error2","isValid","iterate","euclidean","pixels","maximum","Pose","translation","i0i0","j0j0","i0j0","delta","imageVectors","i0","j0","ivec","jvec","row1","row2","row3","q","lambda","zmin","zi","posRotation","oldSopImagePoints","sopImagePoints","converged","iteration","oldImageDifference","imageDifference","factor","error","move","projection","errorvec","round","wmax","cn","svdcmp","bestError","bestRotation","bestTranslation","alternativeError","alternativeRotation","alternativeTranslation","lib_POS","ArucoMarker","Number","input","components_ArucoMarker","render","_vm","_h","$createElement","_c","_self","ref","attrs","xmlns","viewBox","preserveAspectRatio","on","click","$event","_v","transform","_l","index","key","_e","$refs","alt","title","btoa","svg","outerHTML","staticRenderFns","src_components_ArucoMarker","__webpack_require__","normalizeComponent","ssrContext","detector","poser","App","_this","resolve","videoHeight","ratio","resizeCanvas","play","draw","undefined","innerWidth","innerHeight","_this2","beginPath","closePath","stroke","selectortype_template_index_0_src_App","staticStyle","display","src_App","App_normalizeComponent","vue_esm","config","productionTip","el","components","template"],"mappings":"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","file":"static/js/app.3efe30e32ffc821561ae.js","sourcesContent":["function WebcamFeed () {\n}\n\nWebcamFeed.prototype.requestWebcamFeed = function () {\n  return navigator.mediaDevices.getUserMedia({\n    audio: false,\n    video: {\n      facingMode: {\n        exact: 'environment'\n      }\n    }\n  }).then(stream => {\n    return stream\n  })\n}\n\nexport default WebcamFeed\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/WebcamFeed.js","let CV = {}\n\nCV.Image = function (width, height, data) {\n  this.width = width || 0\n  this.height = height || 0\n  this.data = data || []\n}\n\nCV.grayscale = function (imageSrc, imageDst) {\n  let src = imageSrc.data\n  let dst = imageDst.data\n  let len = src.length\n  let i = 0\n  let j = 0\n\n  for (; i < len; i += 4) {\n    dst[j++] =\n      (src[i] * 0.299 + src[i + 1] * 0.587 + src[i + 2] * 0.114 + 0.5) & 0xff\n  }\n\n  imageDst.width = imageSrc.width\n  imageDst.height = imageSrc.height\n\n  return imageDst\n}\n\nCV.threshold = function (imageSrc, imageDst, threshold) {\n  let src = imageSrc.data\n  let dst = imageDst.data\n  let len = src.length\n  let tab = []\n  let i\n\n  for (i = 0; i < 256; ++i) {\n    tab[i] = i <= threshold ? 0 : 255\n  }\n\n  for (i = 0; i < len; ++i) {\n    dst[i] = tab[src[i]]\n  }\n\n  imageDst.width = imageSrc.width\n  imageDst.height = imageSrc.height\n\n  return imageDst\n}\n\nCV.adaptiveThreshold = function (imageSrc, imageDst, kernelSize, threshold) {\n  let src = imageSrc.data\n  let dst = imageDst.data\n  let len = src.length\n  let tab = []\n  let i\n\n  CV.stackBoxBlur(imageSrc, imageDst, kernelSize)\n\n  for (i = 0; i < 768; ++i) {\n    tab[i] = (i - 255 <= -threshold) ? 255 : 0\n  }\n\n  for (i = 0; i < len; ++i) {\n    dst[i] = tab[src[i] - dst[i] + 255]\n  }\n\n  imageDst.width = imageSrc.width\n  imageDst.height = imageSrc.height\n\n  return imageDst\n}\n\nCV.otsu = function (imageSrc) {\n  let src = imageSrc.data\n  let len = src.length\n  let hist = []\n  let threshold = 0\n  let sum = 0\n  let sumB = 0\n  let wB = 0\n  let wF = 0\n  let max = 0\n  let mu\n  let between\n  let i\n\n  for (i = 0; i < 256; ++i) {\n    hist[i] = 0\n  }\n\n  for (i = 0; i < len; ++i) {\n    hist[src[i]]++\n  }\n\n  for (i = 0; i < 256; ++i) {\n    sum += hist[i] * i\n  }\n\n  for (i = 0; i < 256; ++i) {\n    wB += hist[i]\n    if (wB !== 0) {\n      wF = len - wB\n      if (wF === 0) {\n        break\n      }\n\n      sumB += hist[i] * i\n\n      mu = (sumB / wB) - ((sum - sumB) / wF)\n\n      between = wB * wF * mu * mu\n\n      if (between > max) {\n        max = between\n        threshold = i\n      }\n    }\n  }\n\n  return threshold\n}\n\nCV.stackBoxBlurMult =\n  [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265]\n\nCV.stackBoxBlurShift =\n  [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13]\n\nCV.BlurStack = function () {\n  this.color = 0\n  this.next = null\n}\n\nCV.stackBoxBlur = function (imageSrc, imageDst, kernelSize) {\n  let src = imageSrc.data\n  let dst = imageDst.data\n  let height = imageSrc.height\n  let width = imageSrc.width\n  let heightMinus1 = height - 1\n  let widthMinus1 = width - 1\n  let size = kernelSize + kernelSize + 1\n  let radius = kernelSize + 1\n  let mult = CV.stackBoxBlurMult[kernelSize]\n  let shift = CV.stackBoxBlurShift[kernelSize]\n  let stack\n  let stackStart\n  let color\n  let sum\n  let pos\n  let start\n  let p\n  let x\n  let y\n  let i\n\n  stack = stackStart = new CV.BlurStack()\n  for (i = 1; i < size; ++i) {\n    stack = stack.next = new CV.BlurStack()\n  }\n  stack.next = stackStart\n\n  pos = 0\n\n  for (y = 0; y < height; ++y) {\n    start = pos\n\n    color = src[pos]\n    sum = radius * color\n\n    stack = stackStart\n    for (i = 0; i < radius; ++i) {\n      stack.color = color\n      stack = stack.next\n    }\n    for (i = 1; i < radius; ++i) {\n      stack.color = src[pos + i]\n      sum += stack.color\n      stack = stack.next\n    }\n\n    stack = stackStart\n    for (x = 0; x < width; ++x) {\n      dst[pos++] = (sum * mult) >>> shift\n\n      p = x + radius\n      p = start + (p < widthMinus1 ? p : widthMinus1)\n      sum -= stack.color - src[p]\n\n      stack.color = src[p]\n      stack = stack.next\n    }\n  }\n\n  for (x = 0; x < width; ++x) {\n    pos = x\n    start = pos + width\n\n    color = dst[pos]\n    sum = radius * color\n\n    stack = stackStart\n    for (i = 0; i < radius; ++i) {\n      stack.color = color\n      stack = stack.next\n    }\n    for (i = 1; i < radius; ++i) {\n      stack.color = dst[start]\n      sum += stack.color\n      stack = stack.next\n\n      start += width\n    }\n\n    stack = stackStart\n    for (y = 0; y < height; ++y) {\n      dst[pos] = (sum * mult) >>> shift\n\n      p = y + radius\n      p = x + ((p < heightMinus1 ? p : heightMinus1) * width)\n      sum -= stack.color - dst[p]\n\n      stack.color = dst[p]\n      stack = stack.next\n\n      pos += width\n    }\n  }\n\n  return imageDst\n}\n\nCV.gaussianBlur = function (imageSrc, imageDst, imageMean, kernelSize) {\n  let kernel = CV.gaussianKernel(kernelSize)\n\n  imageDst.width = imageSrc.width\n  imageDst.height = imageSrc.height\n\n  imageMean.width = imageSrc.width\n  imageMean.height = imageSrc.height\n\n  CV.gaussianBlurFilter(imageSrc, imageMean, kernel, true)\n  CV.gaussianBlurFilter(imageMean, imageDst, kernel, false)\n\n  return imageDst\n}\n\nCV.gaussianBlurFilter = function (imageSrc, imageDst, kernel, horizontal) {\n  let src = imageSrc.data\n  let dst = imageDst.data\n  let height = imageSrc.height\n  let width = imageSrc.width\n  let pos = 0\n  let limit = kernel.length >> 1\n  let cur\n  let value\n  let i\n  let j\n  let k\n\n  for (i = 0; i < height; ++i) {\n    for (j = 0; j < width; ++j) {\n      value = 0.0\n\n      for (k = -limit; k <= limit; ++k) {\n        if (horizontal) {\n          cur = pos + k\n          if (j + k < 0) {\n            cur = pos\n          } else if (j + k >= width) {\n            cur = pos\n          }\n        } else {\n          cur = pos + (k * width)\n          if (i + k < 0) {\n            cur = pos\n          } else if (i + k >= height) {\n            cur = pos\n          }\n        }\n\n        value += kernel[limit + k] * src[cur]\n      }\n\n      dst[pos++] = horizontal ? value : (value + 0.5) & 0xff\n    }\n  }\n\n  return imageDst\n}\n\nCV.gaussianKernel = function (kernelSize) {\n  let tab = [[1], [0.25, 0.5, 0.25], [0.0625, 0.25, 0.375, 0.25, 0.0625], [0.03125, 0.109375, 0.21875, 0.28125, 0.21875, 0.109375, 0.03125]]\n  let kernel = []\n  let center\n  let sigma\n  let scale2X\n  let sum\n  let x\n  let i\n\n  if ((kernelSize <= 7) && (kernelSize % 2 === 1)) {\n    kernel = tab[kernelSize >> 1]\n  } else {\n    center = (kernelSize - 1.0) * 0.5\n    sigma = 0.8 + (0.3 * (center - 1.0))\n    scale2X = -0.5 / (sigma * sigma)\n    sum = 0.0\n    for (i = 0; i < kernelSize; ++i) {\n      x = i - center\n      sum += kernel[i] = Math.exp(scale2X * x * x)\n    }\n    sum = 1 / sum\n    for (i = 0; i < kernelSize; ++i) {\n      kernel[i] *= sum\n    }\n  }\n\n  return kernel\n}\n\nCV.findContours = function (imageSrc, binary) {\n  let width = imageSrc.width\n  let height = imageSrc.height\n  let contours = []\n  let src\n  let deltas\n  let pos\n  let pix\n  let nbd\n  let outer\n  let hole\n  let i\n  let j\n\n  src = CV.binaryBorder(imageSrc, binary)\n\n  deltas = CV.neighborhoodDeltas(width + 2)\n\n  pos = width + 3\n  nbd = 1\n\n  for (i = 0; i < height; ++i, pos += 2) {\n    for (j = 0; j < width; ++j, ++pos) {\n      pix = src[pos]\n\n      if (pix !== 0) {\n        outer = hole = false\n\n        if (pix === 1 && src[pos - 1] === 0) {\n          outer = true\n        } else if (pix >= 1 && src[pos + 1] === 0) {\n          hole = true\n        }\n\n        if (outer || hole) {\n          ++nbd\n\n          contours.push(CV.borderFollowing(src, pos, nbd, { x: j, y: i }, hole, deltas))\n        }\n      }\n    }\n  }\n\n  return contours\n}\n\nCV.borderFollowing = function (src, pos, nbd, point, hole, deltas) {\n  let contour = []\n  let pos1\n  let pos3\n  let pos4\n  let s\n  let sEnd\n  // let sPrev\n\n  contour.hole = hole\n\n  s = sEnd = hole ? 0 : 4\n  do {\n    s = (s - 1) & 7\n    pos1 = pos + deltas[s]\n    if (src[pos1] !== 0) {\n      break\n    }\n  } while (s !== sEnd)\n\n  if (s === sEnd) {\n    src[pos] = -nbd\n    contour.push({ x: point.x, y: point.y })\n  } else {\n    pos3 = pos\n    // sPrev = s ^ 4\n\n    while (true) {\n      sEnd = s\n\n      do {\n        pos4 = pos3 + deltas[++s]\n      } while (src[pos4] === 0)\n\n      s &= 7\n\n      if (((s - 1) >>> 0) < (sEnd >>> 0)) {\n        src[pos3] = -nbd\n      } else if (src[pos3] === 1) {\n        src[pos3] = nbd\n      }\n\n      contour.push({ x: point.x, y: point.y })\n\n      // sPrev = s\n\n      point.x += CV.neighborhood[s][0]\n      point.y += CV.neighborhood[s][1]\n\n      if ((pos4 === pos) && (pos3 === pos1)) {\n        break\n      }\n\n      pos3 = pos4\n      s = (s + 4) & 7\n    }\n  }\n\n  return contour\n}\n\nCV.neighborhood =\n  [[1, 0], [1, -1], [0, -1], [-1, -1], [-1, 0], [-1, 1], [0, 1], [1, 1]]\n\nCV.neighborhoodDeltas = function (width) {\n  let deltas = []\n  let len = CV.neighborhood.length\n  let i = 0\n\n  for (; i < len; ++i) {\n    deltas[i] = CV.neighborhood[i][0] + (CV.neighborhood[i][1] * width)\n  }\n\n  return deltas.concat(deltas)\n}\n\nCV.approxPolyDP = function (contour, epsilon) {\n  let slice = { start_index: 0, end_index: 0 }\n  let rightSlice = { start_index: 0, end_index: 0 }\n  let poly = []\n  let stack = []\n  let len = contour.length\n  let pt\n  let startPt\n  let endPt\n  let dist\n  let maxDist\n  let leEps\n  let dx\n  let dy\n  let i\n  let j\n  let k\n\n  epsilon *= epsilon\n\n  k = 0\n\n  for (i = 0; i < 3; ++i) {\n    maxDist = 0\n\n    k = (k + rightSlice.start_index) % len\n    startPt = contour[k]\n    if (++k === len) { k = 0 }\n\n    for (j = 1; j < len; ++j) {\n      pt = contour[k]\n      if (++k === len) { k = 0 }\n\n      dx = pt.x - startPt.x\n      dy = pt.y - startPt.y\n      dist = dx * dx + dy * dy\n\n      if (dist > maxDist) {\n        maxDist = dist\n        rightSlice.start_index = j\n      }\n    }\n  }\n\n  if (maxDist <= epsilon) {\n    poly.push({ x: startPt.x, y: startPt.y })\n  } else {\n    slice.start_index = k\n    slice.end_index = (rightSlice.start_index += slice.start_index)\n\n    rightSlice.start_index -= rightSlice.start_index >= len ? len : 0\n    rightSlice.end_index = slice.start_index\n    if (rightSlice.end_index < rightSlice.start_index) {\n      rightSlice.end_index += len\n    }\n\n    stack.push({ start_index: rightSlice.start_index, end_index: rightSlice.end_index })\n    stack.push({ start_index: slice.start_index, end_index: slice.end_index })\n  }\n\n  while (stack.length !== 0) {\n    slice = stack.pop()\n\n    endPt = contour[slice.end_index % len]\n    startPt = contour[k = slice.start_index % len]\n    if (++k === len) { k = 0 }\n\n    if (slice.end_index <= slice.start_index + 1) {\n      leEps = true\n    } else {\n      maxDist = 0\n\n      dx = endPt.x - startPt.x\n      dy = endPt.y - startPt.y\n\n      for (i = slice.start_index + 1; i < slice.end_index; ++i) {\n        pt = contour[k]\n        if (++k === len) { k = 0 }\n\n        dist = Math.abs((pt.y - startPt.y) * dx - (pt.x - startPt.x) * dy)\n\n        if (dist > maxDist) {\n          maxDist = dist\n          rightSlice.start_index = i\n        }\n      }\n\n      leEps = maxDist * maxDist <= epsilon * (dx * dx + dy * dy)\n    }\n\n    if (leEps) {\n      poly.push({ x: startPt.x, y: startPt.y })\n    } else {\n      rightSlice.end_index = slice.end_index\n      slice.end_index = rightSlice.start_index\n\n      stack.push({ start_index: rightSlice.start_index, end_index: rightSlice.end_index })\n      stack.push({ start_index: slice.start_index, end_index: slice.end_index })\n    }\n  }\n\n  return poly\n}\n\nCV.warp = function (imageSrc, imageDst, contour, warpSize) {\n  let src = imageSrc.data\n  let dst = imageDst.data\n  let width = imageSrc.width\n  let height = imageSrc.height\n  let pos = 0\n  let sx1\n  let sx2\n  let dx1\n  let dx2\n  let sy1\n  let sy2\n  let dy1\n  let dy2\n  let p1\n  let p2\n  let p3\n  let p4\n  let m\n  let r\n  let s\n  let t\n  let u\n  let v\n  let w\n  let x\n  let y\n  let i\n  let j\n\n  m = CV.getPerspectiveTransform(contour, warpSize - 1)\n\n  r = m[8]\n  s = m[2]\n  t = m[5]\n\n  for (i = 0; i < warpSize; ++i) {\n    r += m[7]\n    s += m[1]\n    t += m[4]\n\n    u = r\n    v = s\n    w = t\n\n    for (j = 0; j < warpSize; ++j) {\n      u += m[6]\n      v += m[0]\n      w += m[3]\n\n      x = v / u\n      y = w / u\n\n      sx1 = x >>> 0\n      sx2 = (sx1 === width - 1) ? sx1 : sx1 + 1\n      dx1 = x - sx1\n      dx2 = 1.0 - dx1\n\n      sy1 = y >>> 0\n      sy2 = (sy1 === height - 1) ? sy1 : sy1 + 1\n      dy1 = y - sy1\n      dy2 = 1.0 - dy1\n\n      p1 = p2 = sy1 * width\n      p3 = p4 = sy2 * width\n\n      dst[pos++] =\n        (dy2 * (dx2 * src[p1 + sx1] + dx1 * src[p2 + sx2]) +\n          dy1 * (dx2 * src[p3 + sx1] + dx1 * src[p4 + sx2])) & 0xff\n    }\n  }\n\n  imageDst.width = warpSize\n  imageDst.height = warpSize\n\n  return imageDst\n}\n\nCV.getPerspectiveTransform = function (src, size) {\n  let rq = CV.square2quad(src)\n\n  rq[0] /= size\n  rq[1] /= size\n  rq[3] /= size\n  rq[4] /= size\n  rq[6] /= size\n  rq[7] /= size\n\n  return rq\n}\n\nCV.square2quad = function (src) {\n  let sq = []\n  let px\n  let py\n  let dx1\n  let dx2\n  let dy1\n  let dy2\n  let den\n\n  px = src[0].x - src[1].x + src[2].x - src[3].x\n  py = src[0].y - src[1].y + src[2].y - src[3].y\n\n  if (px === 0 && py === 0) {\n    sq[0] = src[1].x - src[0].x\n    sq[1] = src[2].x - src[1].x\n    sq[2] = src[0].x\n    sq[3] = src[1].y - src[0].y\n    sq[4] = src[2].y - src[1].y\n    sq[5] = src[0].y\n    sq[6] = 0\n    sq[7] = 0\n    sq[8] = 1\n  } else {\n    dx1 = src[1].x - src[2].x\n    dx2 = src[3].x - src[2].x\n    dy1 = src[1].y - src[2].y\n    dy2 = src[3].y - src[2].y\n    den = dx1 * dy2 - dx2 * dy1\n\n    sq[6] = (px * dy2 - dx2 * py) / den\n    sq[7] = (dx1 * py - px * dy1) / den\n    sq[8] = 1\n    sq[0] = src[1].x - src[0].x + sq[6] * src[1].x\n    sq[1] = src[3].x - src[0].x + sq[7] * src[3].x\n    sq[2] = src[0].x\n    sq[3] = src[1].y - src[0].y + sq[6] * src[1].y\n    sq[4] = src[3].y - src[0].y + sq[7] * src[3].y\n    sq[5] = src[0].y\n  }\n\n  return sq\n}\n\nCV.isContourConvex = function (contour) {\n  let orientation = 0\n  let convex = true\n  let len = contour.length\n  let i = 0\n  let j = 0\n  let curPt\n  let prevPt\n  let dxdy0\n  let dydx0\n  let dx0\n  let dy0\n  let dx\n  let dy\n\n  prevPt = contour[len - 1]\n  curPt = contour[0]\n\n  dx0 = curPt.x - prevPt.x\n  dy0 = curPt.y - prevPt.y\n\n  for (; i < len; ++i) {\n    if (++j === len) { j = 0 }\n\n    prevPt = curPt\n    curPt = contour[j]\n\n    dx = curPt.x - prevPt.x\n    dy = curPt.y - prevPt.y\n    dxdy0 = dx * dy0\n    dydx0 = dy * dx0\n\n    orientation |= dydx0 > dxdy0 ? 1 : (dydx0 < dxdy0 ? 2 : 3)\n\n    if (orientation === 3) {\n      convex = false\n      break\n    }\n\n    dx0 = dx\n    dy0 = dy\n  }\n\n  return convex\n}\n\nCV.perimeter = function (poly) {\n  let len = poly.length\n  let i = 0\n  let j = len - 1\n  let p = 0.0\n  let dx\n  let dy\n\n  for (; i < len; j = i++) {\n    dx = poly[i].x - poly[j].x\n    dy = poly[i].y - poly[j].y\n\n    p += Math.sqrt(dx * dx + dy * dy)\n  }\n\n  return p\n}\n\nCV.minEdgeLength = function (poly) {\n  let len = poly.length\n  let i = 0\n  let j = len - 1\n  let min = Infinity\n  let d\n  let dx\n  let dy\n\n  for (; i < len; j = i++) {\n    dx = poly[i].x - poly[j].x\n    dy = poly[i].y - poly[j].y\n\n    d = dx * dx + dy * dy\n\n    if (d < min) {\n      min = d\n    }\n  }\n\n  return Math.sqrt(min)\n}\n\nCV.countNonZero = function (imageSrc, square) {\n  let src = imageSrc.data\n  let height = square.height\n  let width = square.width\n  let pos = square.x + (square.y * imageSrc.width)\n  let span = imageSrc.width - width\n  let nz = 0\n  let i\n  let j\n\n  for (i = 0; i < height; ++i) {\n    for (j = 0; j < width; ++j) {\n      if (src[pos++] !== 0) {\n        ++nz\n      }\n    }\n\n    pos += span\n  }\n\n  return nz\n}\n\nCV.binaryBorder = function (imageSrc, dst) {\n  let src = imageSrc.data\n  let height = imageSrc.height\n  let width = imageSrc.width\n  let posSrc = 0\n  let posDst = 0\n  let i\n  let j\n\n  for (j = -2; j < width; ++j) {\n    dst[posDst++] = 0\n  }\n\n  for (i = 0; i < height; ++i) {\n    dst[posDst++] = 0\n\n    for (j = 0; j < width; ++j) {\n      dst[posDst++] = (src[posSrc++] === 0 ? 0 : 1)\n    }\n\n    dst[posDst++] = 0\n  }\n\n  for (j = -2; j < width; ++j) {\n    dst[posDst++] = 0\n  }\n\n  return dst\n}\n\nexport default CV\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/CV.js","\nimport CV from './CV'\n\nlet AR = {}\n\nAR.Marker = function (id, corners) {\n  this.id = id\n  this.corners = corners\n}\n\nAR.Detector = function () {\n  this.grey = new CV.Image()\n  this.thres = new CV.Image()\n  this.homography = new CV.Image()\n  this.binary = []\n  this.contours = []\n  this.polys = []\n  this.candidates = []\n}\n\nAR.Detector.prototype.detect = function (image) {\n  CV.grayscale(image, this.grey)\n  CV.adaptiveThreshold(this.grey, this.thres, 2, 7)\n\n  this.contours = CV.findContours(this.thres, this.binary)\n\n  this.candidates = this.findCandidates(this.contours, image.width * 0.20, 0.05, 10)\n  this.candidates = this.clockwiseCorners(this.candidates)\n  this.candidates = this.notTooNear(this.candidates, 10)\n\n  return this.findMarkers(this.grey, this.candidates, 49)\n}\n\nAR.Detector.prototype.findCandidates = function (contours, minSize, epsilon, minLength) {\n  let candidates = []\n  let len = contours.length\n  let contour\n  let poly\n  let i\n\n  this.polys = []\n\n  for (i = 0; i < len; ++i) {\n    contour = contours[i]\n\n    if (contour.length >= minSize) {\n      poly = CV.approxPolyDP(contour, contour.length * epsilon)\n\n      this.polys.push(poly)\n\n      if ((poly.length === 4) && (CV.isContourConvex(poly))) {\n        if (CV.minEdgeLength(poly) >= minLength) {\n          candidates.push(poly)\n        }\n      }\n    }\n  }\n\n  return candidates\n}\n\nAR.Detector.prototype.clockwiseCorners = function (candidates) {\n  let len = candidates.length\n  let dx1\n  let dx2\n  let dy1\n  let dy2\n  let swap\n  let i\n\n  for (i = 0; i < len; ++i) {\n    dx1 = candidates[i][1].x - candidates[i][0].x\n    dy1 = candidates[i][1].y - candidates[i][0].y\n    dx2 = candidates[i][2].x - candidates[i][0].x\n    dy2 = candidates[i][2].y - candidates[i][0].y\n\n    if ((dx1 * dy2 - dy1 * dx2) < 0) {\n      swap = candidates[i][1]\n      candidates[i][1] = candidates[i][3]\n      candidates[i][3] = swap\n    }\n  }\n\n  return candidates\n}\n\nAR.Detector.prototype.notTooNear = function (candidates, minDist) {\n  let notTooNear = []\n  let len = candidates.length\n  let dist\n  let dx\n  let dy\n  let i\n  let j\n  let k\n\n  for (i = 0; i < len; ++i) {\n    for (j = i + 1; j < len; ++j) {\n      dist = 0\n\n      for (k = 0; k < 4; ++k) {\n        dx = candidates[i][k].x - candidates[j][k].x\n        dy = candidates[i][k].y - candidates[j][k].y\n\n        dist += dx * dx + dy * dy\n      }\n\n      if ((dist / 4) < (minDist * minDist)) {\n        if (CV.perimeter(candidates[i]) < CV.perimeter(candidates[j])) {\n          candidates[i].tooNear = true\n        } else {\n          candidates[j].tooNear = true\n        }\n      }\n    }\n  }\n\n  for (i = 0; i < len; ++i) {\n    if (!candidates[i].tooNear) {\n      notTooNear.push(candidates[i])\n    }\n  }\n\n  return notTooNear\n}\n\nAR.Detector.prototype.findMarkers = function (imageSrc, candidates, warpSize) {\n  let markers = []\n  let len = candidates.length\n  let candidate\n  let marker\n  let i\n\n  for (i = 0; i < len; ++i) {\n    candidate = candidates[i]\n\n    CV.warp(imageSrc, this.homography, candidate, warpSize)\n\n    CV.threshold(this.homography, this.homography, CV.otsu(this.homography))\n\n    marker = this.getMarker(this.homography, candidate)\n    if (marker) {\n      markers.push(marker)\n    }\n  }\n\n  return markers\n}\n\nAR.Detector.prototype.getMarker = function (imageSrc, candidate) {\n  let width = (imageSrc.width / 7) >>> 0\n  let minZero = (width * width) >> 1\n  let bits = []\n  let rotations = []\n  let distances = []\n  let square\n  let pair\n  let inc\n  let i\n  let j\n\n  for (i = 0; i < 7; ++i) {\n    inc = (i === 0 || i === 6) ? 1 : 6\n\n    for (j = 0; j < 7; j += inc) {\n      square = { x: j * width, y: i * width, width: width, height: width }\n      if (CV.countNonZero(imageSrc, square) > minZero) {\n        return null\n      }\n    }\n  }\n\n  for (i = 0; i < 5; ++i) {\n    bits[i] = []\n\n    for (j = 0; j < 5; ++j) {\n      square = { x: (j + 1) * width, y: (i + 1) * width, width: width, height: width }\n\n      bits[i][j] = CV.countNonZero(imageSrc, square) > minZero ? 1 : 0\n    }\n  }\n\n  rotations[0] = bits\n  distances[0] = this.hammingDistance(rotations[0])\n\n  pair = { first: distances[0], second: 0 }\n\n  for (i = 1; i < 4; ++i) {\n    rotations[i] = this.rotate(rotations[i - 1])\n    distances[i] = this.hammingDistance(rotations[i])\n\n    if (distances[i] < pair.first) {\n      pair.first = distances[i]\n      pair.second = i\n    }\n  }\n\n  if (pair.first !== 0) {\n    return null\n  }\n\n  return new AR.Marker(\n    this.mat2id(rotations[pair.second]),\n    this.rotate2(candidate, 4 - pair.second))\n}\n\nAR.Detector.prototype.hammingDistance = function (bits) {\n  let ids = [[1, 0, 0, 0, 0], [1, 0, 1, 1, 1], [0, 1, 0, 0, 1], [0, 1, 1, 1, 0]]\n  let dist = 0\n  let sum\n  let minSum\n  let i\n  let j\n  let k\n\n  for (i = 0; i < 5; ++i) {\n    minSum = Infinity\n\n    for (j = 0; j < 4; ++j) {\n      sum = 0\n\n      for (k = 0; k < 5; ++k) {\n        sum += bits[i][k] === ids[j][k] ? 0 : 1\n      }\n\n      if (sum < minSum) {\n        minSum = sum\n      }\n    }\n\n    dist += minSum\n  }\n\n  return dist\n}\n\nAR.Detector.prototype.mat2id = function (bits) {\n  let id = 0\n  let i\n\n  for (i = 0; i < 5; ++i) {\n    id <<= 1\n    id |= bits[i][1]\n    id <<= 1\n    id |= bits[i][3]\n  }\n\n  return id\n}\n\nAR.Detector.prototype.rotate = function (src) {\n  let dst = []\n  let len = src.length\n  let i\n  let j\n\n  for (i = 0; i < len; ++i) {\n    dst[i] = []\n    for (j = 0; j < src[i].length; ++j) {\n      dst[i][j] = src[src[i].length - j - 1][i]\n    }\n  }\n\n  return dst\n}\n\nAR.Detector.prototype.rotate2 = function (src, rotation) {\n  let dst = []\n  let len = src.length\n  let i\n\n  for (i = 0; i < len; ++i) {\n    dst[i] = src[(rotation + i) % len]\n  }\n\n  return dst\n}\n\nexport default AR\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/AR.js","const SVD = {}\n\nSVD.svdcmp = function (a, m, n, w, v) {\n  let flag\n  let i\n  let its\n  let j\n  let jj\n  let k\n  let l\n  let nm\n  let anorm = 0.0\n  let c\n  let f\n  let g = 0.0\n  let h\n  let s\n  let scale = 0.0\n  let x\n  let y\n  let z\n  let rv1 = []\n\n  // Householder reduction to bidiagonal form\n  for (i = 0; i < n; ++i) {\n    l = i + 1\n    rv1[i] = scale * g\n    g = s = scale = 0.0\n    if (i < m) {\n      for (k = i; k < m; ++k) {\n        scale += Math.abs(a[k][i])\n      }\n      if (scale !== 0.0) {\n        for (k = i; k < m; ++k) {\n          a[k][i] /= scale\n          s += a[k][i] * a[k][i]\n        }\n        f = a[i][i]\n        g = -SVD.sign(Math.sqrt(s), f)\n        h = f * g - s\n        a[i][i] = f - g\n        for (j = l; j < n; ++j) {\n          for (s = 0.0, k = i; k < m; ++k) {\n            s += a[k][i] * a[k][j]\n          }\n          f = s / h\n          for (k = i; k < m; ++k) {\n            a[k][j] += f * a[k][i]\n          }\n        }\n        for (k = i; k < m; ++k) {\n          a[k][i] *= scale\n        }\n      }\n    }\n    w[i] = scale * g\n    g = s = scale = 0.0\n    if ((i < m) && (i !== n - 1)) {\n      for (k = l; k < n; ++k) {\n        scale += Math.abs(a[i][k])\n      }\n      if (scale !== 0.0) {\n        for (k = l; k < n; ++k) {\n          a[i][k] /= scale\n          s += a[i][k] * a[i][k]\n        }\n        f = a[i][l]\n        g = -SVD.sign(Math.sqrt(s), f)\n        h = f * g - s\n        a[i][l] = f - g\n        for (k = l; k < n; ++k) {\n          rv1[k] = a[i][k] / h\n        }\n        for (j = l; j < m; ++j) {\n          for (s = 0.0, k = l; k < n; ++k) {\n            s += a[j][k] * a[i][k]\n          }\n          for (k = l; k < n; ++k) {\n            a[j][k] += s * rv1[k]\n          }\n        }\n        for (k = l; k < n; ++k) {\n          a[i][k] *= scale\n        }\n      }\n    }\n    anorm = Math.max(anorm, (Math.abs(w[i]) + Math.abs(rv1[i])))\n  }\n\n  // Acumulation of right-hand transformation\n  for (i = n - 1; i >= 0; --i) {\n    if (i < n - 1) {\n      if (g !== 0.0) {\n        for (j = l; j < n; ++j) {\n          v[j][i] = (a[i][j] / a[i][l]) / g\n        }\n        for (j = l; j < n; ++j) {\n          for (s = 0.0, k = l; k < n; ++k) {\n            s += a[i][k] * v[k][j]\n          }\n          for (k = l; k < n; ++k) {\n            v[k][j] += s * v[k][i]\n          }\n        }\n      }\n      for (j = l; j < n; ++j) {\n        v[i][j] = v[j][i] = 0.0\n      }\n    }\n    v[i][i] = 1.0\n    g = rv1[i]\n    l = i\n  }\n\n  // Acumulation of left-hand transformation\n  for (i = Math.min(n, m) - 1; i >= 0; --i) {\n    l = i + 1\n    g = w[i]\n    for (j = l; j < n; ++j) {\n      a[i][j] = 0.0\n    }\n    if (g !== 0.0) {\n      g = 1.0 / g\n      for (j = l; j < n; ++j) {\n        for (s = 0.0, k = l; k < m; ++k) {\n          s += a[k][i] * a[k][j]\n        }\n        f = (s / a[i][i]) * g\n        for (k = i; k < m; ++k) {\n          a[k][j] += f * a[k][i]\n        }\n      }\n      for (j = i; j < m; ++j) {\n        a[j][i] *= g\n      }\n    } else {\n      for (j = i; j < m; ++j) {\n        a[j][i] = 0.0\n      }\n    }\n    ++a[i][i]\n  }\n\n  // Diagonalization of the bidiagonal form\n  for (k = n - 1; k >= 0; --k) {\n    for (its = 1; its <= 30; ++its) {\n      flag = true\n      for (l = k; l >= 0; --l) {\n        nm = l - 1\n        if (Math.abs(rv1[l]) + anorm === anorm) {\n          flag = false\n          break\n        }\n        if (Math.abs(w[nm]) + anorm === anorm) {\n          break\n        }\n      }\n      if (flag) {\n        c = 0.0\n        s = 1.0\n        for (i = l; i <= k; ++i) {\n          f = s * rv1[i]\n          if (Math.abs(f) + anorm === anorm) {\n            break\n          }\n          g = w[i]\n          h = SVD.pythag(f, g)\n          w[i] = h\n          h = 1.0 / h\n          c = g * h\n          s = -f * h\n          for (j = 1; j <= m; ++j) {\n            y = a[j][nm]\n            z = a[j][i]\n            a[j][nm] = y * c + z * s\n            a[j][i] = z * c - y * s\n          }\n        }\n      }\n\n      // Convergence\n      z = w[k]\n      if (l === k) {\n        if (z < 0.0) {\n          w[k] = -z\n          for (j = 0; j < n; ++j) {\n            v[j][k] = -v[j][k]\n          }\n        }\n        break\n      }\n\n      if (its === 30) {\n        return false\n      }\n\n      // Shift from bottom 2-by-2 minor\n      x = w[l]\n      nm = k - 1\n      y = w[nm]\n      g = rv1[nm]\n      h = rv1[k]\n      f = ((y - z) * (y + z) + (g - h) * (g + h)) / (2.0 * h * y)\n      g = SVD.pythag(f, 1.0)\n      f = ((x - z) * (x + z) + h * ((y / (f + SVD.sign(g, f))) - h)) / x\n\n      // Next QR transformation\n      c = s = 1.0\n      for (j = l; j <= nm; ++j) {\n        i = j + 1\n        g = rv1[i]\n        y = w[i]\n        h = s * g\n        g = c * g\n        z = SVD.pythag(f, h)\n        rv1[j] = z\n        c = f / z\n        s = h / z\n        f = x * c + g * s\n        g = g * c - x * s\n        h = y * s\n        y *= c\n        for (jj = 0; jj < n; ++jj) {\n          x = v[jj][j]\n          z = v[jj][i]\n          v[jj][j] = x * c + z * s\n          v[jj][i] = z * c - x * s\n        }\n        z = SVD.pythag(f, h)\n        w[j] = z\n        if (z !== 0.0) {\n          z = 1.0 / z\n          c = f * z\n          s = h * z\n        }\n        f = c * g + s * y\n        x = c * y - s * g\n        for (jj = 0; jj < m; ++jj) {\n          y = a[jj][j]\n          z = a[jj][i]\n          a[jj][j] = y * c + z * s\n          a[jj][i] = z * c - y * s\n        }\n      }\n      rv1[l] = 0.0\n      rv1[k] = f\n      w[k] = x\n    }\n  }\n\n  return true\n}\n\nSVD.pythag = function (a, b) {\n  let at = Math.abs(a)\n  let bt = Math.abs(b)\n  let ct\n\n  if (at > bt) {\n    ct = bt / at\n    return at * Math.sqrt(1.0 + ct * ct)\n  }\n\n  if (bt === 0.0) {\n    return 0.0\n  }\n\n  ct = at / bt\n  return bt * Math.sqrt(1.0 + ct * ct)\n}\n\nSVD.sign = function (a, b) {\n  return b >= 0.0 ? Math.abs(a) : -Math.abs(a)\n}\n\nexport default SVD\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/SVD.js","import SVD from './SVD'\n\nconst POS = {}\n\nPOS.Posit = function (modelSize, focalLength) {\n  this.objectPoints = this.buildModel(modelSize)\n  this.focalLength = focalLength\n\n  this.objectVectors = []\n  this.objectNormal = []\n  this.objectMatrix = [[], [], []]\n\n  this.init()\n}\n\nPOS.Posit.prototype.buildModel = function (modelSize) {\n  let half = modelSize / 2.0\n\n  return [\n    [-half, half, 0.0],\n    [half, half, 0.0],\n    [half, -half, 0.0],\n    [-half, -half, 0.0]]\n}\n\nPOS.Posit.prototype.init = function () {\n  let np = this.objectPoints.length\n  let vectors = []\n  let n = []\n  let len = 0.0\n  let row = 2\n  let i\n\n  for (i = 0; i < np; ++i) {\n    this.objectVectors[i] = [this.objectPoints[i][0] - this.objectPoints[0][0], this.objectPoints[i][1] - this.objectPoints[0][1], this.objectPoints[i][2] - this.objectPoints[0][2]]\n    vectors[i] = [this.objectVectors[i][0], this.objectVectors[i][1], this.objectVectors[i][2]]\n  }\n\n  while (len === 0.0) {\n    n[0] = this.objectVectors[1][1] * this.objectVectors[row][2] -\n      this.objectVectors[1][2] * this.objectVectors[row][1]\n    n[1] = this.objectVectors[1][2] * this.objectVectors[row][0] -\n      this.objectVectors[1][0] * this.objectVectors[row][2]\n    n[2] = this.objectVectors[1][0] * this.objectVectors[row][1] -\n      this.objectVectors[1][1] * this.objectVectors[row][0]\n\n    len = Math.sqrt(n[0] * n[0] + n[1] * n[1] + n[2] * n[2])\n\n    ++row\n  }\n\n  for (i = 0; i < 3; ++i) {\n    this.objectNormal[i] = n[i] / len\n  }\n\n  POS.pseudoInverse(vectors, np, this.objectMatrix)\n}\n\nPOS.Posit.prototype.pose = function (imagePoints) {\n  let posRotation1 = [[], [], []]\n  let posRotation2 = [[], [], []]\n  let posTranslation = []\n  let rotation1 = [[], [], []]\n  let rotation2 = [[], [], []]\n  let translation1 = []\n  let translation2 = []\n  let error1\n  let error2\n  let valid1\n  let valid2\n  let i\n  let j\n\n  this.pos(imagePoints, posRotation1, posRotation2, posTranslation)\n\n  valid1 = this.isValid(posRotation1, posTranslation)\n  if (valid1) {\n    error1 = this.iterate(imagePoints, posRotation1, posTranslation, rotation1, translation1)\n  } else {\n    error1 = { euclidean: -1.0, pixels: -1, maximum: -1.0 }\n  }\n\n  valid2 = this.isValid(posRotation2, posTranslation)\n  if (valid2) {\n    error2 = this.iterate(imagePoints, posRotation2, posTranslation, rotation2, translation2)\n  } else {\n    error2 = { euclidean: -1.0, pixels: -1, maximum: -1.0 }\n  }\n\n  for (i = 0; i < 3; ++i) {\n    for (j = 0; j < 3; ++j) {\n      if (valid1) {\n        translation1[i] -= rotation1[i][j] * this.objectPoints[0][j]\n      }\n      if (valid2) {\n        translation2[i] -= rotation2[i][j] * this.objectPoints[0][j]\n      }\n    }\n  }\n\n  return error1.euclidean < error2.euclidean\n    ? new POS.Pose(error1.pixels, rotation1, translation1, error2.pixels, rotation2, translation2)\n    : new POS.Pose(error2.pixels, rotation2, translation2, error1.pixels, rotation1, translation1)\n}\n\nPOS.Posit.prototype.pos = function (imagePoints, rotation1, rotation2, translation) {\n  let np = this.objectPoints.length\n  let imageVectors = []\n  let i0 = []\n  let j0 = []\n  let ivec = []\n  let jvec = []\n  let row1 = []\n  let row2 = []\n  let row3 = []\n  let i0i0\n  let j0j0\n  let i0j0\n  let delta\n  let q\n  let lambda\n  let mu\n  let scale\n  let i\n  let j\n\n  for (i = 0; i < np; ++i) {\n    imageVectors[i] = [imagePoints[i].x - imagePoints[0].x, imagePoints[i].y - imagePoints[0].y]\n  }\n\n  // i0 and j0\n  for (i = 0; i < 3; ++i) {\n    i0[i] = 0.0\n    j0[i] = 0.0\n    for (j = 0; j < np; ++j) {\n      i0[i] += this.objectMatrix[i][j] * imageVectors[j][0]\n      j0[i] += this.objectMatrix[i][j] * imageVectors[j][1]\n    }\n  }\n\n  i0i0 = i0[0] * i0[0] + i0[1] * i0[1] + i0[2] * i0[2]\n  j0j0 = j0[0] * j0[0] + j0[1] * j0[1] + j0[2] * j0[2]\n  i0j0 = i0[0] * j0[0] + i0[1] * j0[1] + i0[2] * j0[2]\n\n  // Lambda and mu\n  delta = (j0j0 - i0i0) * (j0j0 - i0i0) + 4.0 * (i0j0 * i0j0)\n\n  if (j0j0 - i0i0 >= 0.0) {\n    q = (j0j0 - i0i0 + Math.sqrt(delta)) / 2.0\n  } else {\n    q = (j0j0 - i0i0 - Math.sqrt(delta)) / 2.0\n  }\n\n  if (q >= 0.0) {\n    lambda = Math.sqrt(q)\n    if (lambda === 0.0) {\n      mu = 0.0\n    } else {\n      mu = -i0j0 / lambda\n    }\n  } else {\n    lambda = Math.sqrt(-(i0j0 * i0j0) / q)\n    if (lambda === 0.0) {\n      mu = Math.sqrt(i0i0 - j0j0)\n    } else {\n      mu = -i0j0 / lambda\n    }\n  }\n\n  // First rotation\n  for (i = 0; i < 3; ++i) {\n    ivec[i] = i0[i] + lambda * this.objectNormal[i]\n    jvec[i] = j0[i] + mu * this.objectNormal[i]\n  }\n\n  scale = Math.sqrt(ivec[0] * ivec[0] + ivec[1] * ivec[1] + ivec[2] * ivec[2])\n\n  for (i = 0; i < 3; ++i) {\n    row1[i] = ivec[i] / scale\n    row2[i] = jvec[i] / scale\n  }\n\n  row3[0] = row1[1] * row2[2] - row1[2] * row2[1]\n  row3[1] = row1[2] * row2[0] - row1[0] * row2[2]\n  row3[2] = row1[0] * row2[1] - row1[1] * row2[0]\n\n  for (i = 0; i < 3; ++i) {\n    rotation1[0][i] = row1[i]\n    rotation1[1][i] = row2[i]\n    rotation1[2][i] = row3[i]\n  }\n\n  // Second rotation\n  for (i = 0; i < 3; ++i) {\n    ivec[i] = i0[i] - lambda * this.objectNormal[i]\n    jvec[i] = j0[i] - mu * this.objectNormal[i]\n  }\n\n  for (i = 0; i < 3; ++i) {\n    row1[i] = ivec[i] / scale\n    row2[i] = jvec[i] / scale\n  }\n\n  row3[0] = row1[1] * row2[2] - row1[2] * row2[1]\n  row3[1] = row1[2] * row2[0] - row1[0] * row2[2]\n  row3[2] = row1[0] * row2[1] - row1[1] * row2[0]\n\n  for (i = 0; i < 3; ++i) {\n    rotation2[0][i] = row1[i]\n    rotation2[1][i] = row2[i]\n    rotation2[2][i] = row3[i]\n  }\n\n  // Translation\n  translation[0] = imagePoints[0].x / scale\n  translation[1] = imagePoints[0].y / scale\n  translation[2] = this.focalLength / scale\n}\n\nPOS.Posit.prototype.isValid = function (rotation, translation) {\n  let np = this.objectPoints.length\n  let zmin = Infinity\n  let i = 0\n  let zi\n\n  for (; i < np; ++i) {\n    zi = translation[2] +\n      (rotation[2][0] * this.objectVectors[i][0] +\n        rotation[2][1] * this.objectVectors[i][1] +\n        rotation[2][2] * this.objectVectors[i][2])\n    if (zi < zmin) {\n      zmin = zi\n    }\n  }\n\n  return zmin >= 0.0\n}\n\nPOS.Posit.prototype.iterate = function (imagePoints, posRotation, posTranslation, rotation, translation) {\n  let np = this.objectPoints.length\n  let oldSopImagePoints = []\n  let sopImagePoints = []\n  let rotation1 = [[], [], []]\n  let rotation2 = [[], [], []]\n  let translation1 = []\n  let translation2 = []\n  let converged = false\n  let iteration = 0\n  let oldImageDifference\n  let imageDifference\n  let factor\n  let error\n  let error1\n  let error2\n  let delta\n  let i\n  let j\n\n  for (i = 0; i < np; ++i) {\n    oldSopImagePoints[i] = {\n      x: imagePoints[i].x,\n      y: imagePoints[i].y\n    }\n  }\n\n  for (i = 0; i < 3; ++i) {\n    for (j = 0; j < 3; ++j) {\n      rotation[i][j] = posRotation[i][j]\n    }\n    translation[i] = posTranslation[i]\n  }\n\n  for (i = 0; i < np; ++i) {\n    factor = 0.0\n    for (j = 0; j < 3; ++j) {\n      factor += this.objectVectors[i][j] * rotation[2][j] / translation[2]\n    }\n    sopImagePoints[i] = {\n      x: (1.0 + factor) * imagePoints[i].x,\n      y: (1.0 + factor) * imagePoints[i].y\n    }\n  }\n\n  imageDifference = 0.0\n\n  for (i = 0; i < np; ++i) {\n    imageDifference += Math.abs(sopImagePoints[i].x - oldSopImagePoints[i].x)\n    imageDifference += Math.abs(sopImagePoints[i].y - oldSopImagePoints[i].y)\n  }\n\n  for (i = 0; i < 3; ++i) {\n    translation1[i] = translation[i] -\n      (rotation[i][0] * this.objectPoints[0][0] +\n        rotation[i][1] * this.objectPoints[0][1] +\n        rotation[i][2] * this.objectPoints[0][2])\n  }\n\n  error1 = this.error(imagePoints, rotation, translation1)\n\n  // vConvergence\n  converged = (error1.pixels === 0.0) || (imageDifference < 0.01)\n\n  while (iteration++ < 100 && !converged) {\n    for (i = 0; i < np; ++i) {\n      oldSopImagePoints[i].x = sopImagePoints[i].x\n      oldSopImagePoints[i].y = sopImagePoints[i].y\n    }\n\n    this.pos(sopImagePoints, rotation1, rotation2, translation)\n\n    for (i = 0; i < 3; ++i) {\n      translation1[i] = translation[i] -\n        (rotation1[i][0] * this.objectPoints[0][0] +\n          rotation1[i][1] * this.objectPoints[0][1] +\n          rotation1[i][2] * this.objectPoints[0][2])\n\n      translation2[i] = translation[i] -\n        (rotation2[i][0] * this.objectPoints[0][0] +\n          rotation2[i][1] * this.objectPoints[0][1] +\n          rotation2[i][2] * this.objectPoints[0][2])\n    }\n\n    error1 = this.error(imagePoints, rotation1, translation1)\n    error2 = this.error(imagePoints, rotation2, translation2)\n\n    if ((error1.euclidean >= 0.0) && (error2.euclidean >= 0.0)) {\n      if (error2.euclidean < error1.euclidean) {\n        error = error2\n        for (i = 0; i < 3; ++i) {\n          for (j = 0; j < 3; ++j) {\n            rotation[i][j] = rotation2[i][j]\n          }\n        }\n      } else {\n        error = error1\n        for (i = 0; i < 3; ++i) {\n          for (j = 0; j < 3; ++j) {\n            rotation[i][j] = rotation1[i][j]\n          }\n        }\n      }\n    }\n\n    if ((error1.euclidean < 0.0) && (error2.euclidean >= 0.0)) {\n      error = error2\n      for (i = 0; i < 3; ++i) {\n        for (j = 0; j < 3; ++j) {\n          rotation[i][j] = rotation2[i][j]\n        }\n      }\n    }\n\n    if ((error2.euclidean < 0.0) && (error1.euclidean >= 0.0)) {\n      error = error1\n      for (i = 0; i < 3; ++i) {\n        for (j = 0; j < 3; ++j) {\n          rotation[i][j] = rotation1[i][j]\n        }\n      }\n    }\n\n    for (i = 0; i < np; ++i) {\n      factor = 0.0\n      for (j = 0; j < 3; ++j) {\n        factor += this.objectVectors[i][j] * rotation[2][j] / translation[2]\n      }\n      sopImagePoints[i].x = (1.0 + factor) * imagePoints[i].x\n      sopImagePoints[i].y = (1.0 + factor) * imagePoints[i].y\n    }\n\n    oldImageDifference = imageDifference\n    imageDifference = 0.0\n\n    for (i = 0; i < np; ++i) {\n      imageDifference += Math.abs(sopImagePoints[i].x - oldSopImagePoints[i].x)\n      imageDifference += Math.abs(sopImagePoints[i].y - oldSopImagePoints[i].y)\n    }\n\n    delta = Math.abs(imageDifference - oldImageDifference)\n\n    converged = (error.pixels === 0.0) || (delta < 0.01)\n  }\n\n  return error\n}\n\nPOS.Posit.prototype.error = function (imagePoints, rotation, translation) {\n  let np = this.objectPoints.length\n  let move = []\n  let projection = []\n  let errorvec = []\n  let euclidean = 0.0\n  let pixels = 0.0\n  let maximum = 0.0\n  let i\n  let j\n  let k\n\n  if (!this.isValid(rotation, translation)) {\n    return { euclidean: -1.0, pixels: -1, maximum: -1.0 }\n  }\n\n  for (i = 0; i < np; ++i) {\n    move[i] = []\n    for (j = 0; j < 3; ++j) {\n      move[i][j] = translation[j]\n    }\n  }\n\n  for (i = 0; i < np; ++i) {\n    for (j = 0; j < 3; ++j) {\n      for (k = 0; k < 3; ++k) {\n        move[i][j] += rotation[j][k] * this.objectPoints[i][k]\n      }\n    }\n  }\n\n  for (i = 0; i < np; ++i) {\n    projection[i] = []\n    for (j = 0; j < 2; ++j) {\n      projection[i][j] = this.focalLength * move[i][j] / move[i][2]\n    }\n  }\n\n  for (i = 0; i < np; ++i) {\n    errorvec[i] = [projection[i][0] - imagePoints[i].x, projection[i][1] - imagePoints[i].y]\n  }\n\n  for (i = 0; i < np; ++i) {\n    euclidean += Math.sqrt(errorvec[i][0] * errorvec[i][0] +\n      errorvec[i][1] * errorvec[i][1])\n\n    pixels += Math.abs(Math.round(projection[i][0]) - Math.round(imagePoints[i].x)) +\n      Math.abs(Math.round(projection[i][1]) - Math.round(imagePoints[i].y))\n\n    if (Math.abs(errorvec[i][0]) > maximum) {\n      maximum = Math.abs(errorvec[i][0])\n    }\n    if (Math.abs(errorvec[i][1]) > maximum) {\n      maximum = Math.abs(errorvec[i][1])\n    }\n  }\n\n  return { euclidean: euclidean / np, pixels: pixels, maximum: maximum }\n}\n\nPOS.pseudoInverse = function (a, n, b) {\n  let w = []\n  let v = [[], [], []]\n  let s = [[], [], []]\n  let wmax = 0.0\n  let cn = 0\n  let i\n  let j\n  let k\n\n  SVD.svdcmp(a, n, 3, w, v)\n\n  for (i = 0; i < 3; ++i) {\n    if (w[i] > wmax) {\n      wmax = w[i]\n    }\n  }\n\n  wmax *= 0.01\n\n  for (i = 0; i < 3; ++i) {\n    if (w[i] < wmax) {\n      w[i] = 0.0\n    }\n  }\n\n  for (j = 0; j < 3; ++j) {\n    if (w[j] === 0.0) {\n      ++cn\n      for (k = j; k < 2; ++k) {\n        for (i = 0; i < n; ++i) {\n          a[i][k] = a[i][k + 1]\n        }\n        for (i = 0; i < 3; ++i) {\n          v[i][k] = v[i][k + 1]\n        }\n      }\n    }\n  }\n\n  for (j = 0; j < 2; ++j) {\n    if (w[j] === 0.0) {\n      w[j] = w[j + 1]\n    }\n  }\n\n  for (i = 0; i < 3; ++i) {\n    for (j = 0; j < 3 - cn; ++j) {\n      s[i][j] = v[i][j] / w[j]\n    }\n  }\n\n  for (i = 0; i < 3; ++i) {\n    for (j = 0; j < n; ++j) {\n      b[i][j] = 0.0\n      for (k = 0; k < 3 - cn; ++k) {\n        b[i][j] += s[i][k] * a[j][k]\n      }\n    }\n  }\n}\n\nPOS.Pose = function (error1, rotation1, translation1, error2, rotation2, translation2) {\n  this.bestError = error1\n  this.bestRotation = rotation1\n  this.bestTranslation = translation1\n  this.alternativeError = error2\n  this.alternativeRotation = rotation2\n  this.alternativeTranslation = translation2\n}\n\nexport default POS\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/POS.js","<template>\n<div>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" ref=\"svg\" viewBox=\"0 0 7 7\" preserveAspectRatio=\"meet xMidYMid\" @click=\"id++\">\n    <rect x=\"0\" y=\"0\" width=\"7\" height=\"7\"/>\n    <g transform=\"translate(1,1)\">\n      <rect v-for=\"(pos, index) in matrix\" v-if=\"pos === 1\" :key=\"index\" :x=\"index % 5\" :y=\"~~(index / 5)\" width=\"1\" height=\"1\" />\n    </g>\n  </svg>\n  <img alt=\"bla\" title=\"bla\" v-if=\"this.$refs.svg\" width=\"100\" height=\"100\" :src=\"'data:image/svg+xml;base64,' + btoa(this.$refs.svg.outerHTML)\" />\n</div>\n</template>\n<script>\nexport default {\n  name: 'ArucoMarker',\n  props: {\n    id: {\n      default: 1,\n      type: Number\n    }\n  },\n  computed: {\n    matrix () {\n      let ids = [16, 23, 9, 14]\n      let index, val, x, y\n      let matrix = [[0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0]]\n\n      for (y = 0; y < 5; y++) {\n        index = (this.id >> 2 * (4 - y)) & 3\n        val = ids[index]\n        for (x = 0; x < 5; x++) {\n          if ((val >> (4 - x)) & 1) {\n            matrix[x][y] = 1\n          } else {\n            matrix[x][y] = 0\n          }\n        }\n      }\n      return matrix.reduce((prev, curr) => prev.concat(curr), [])\n    }\n  },\n  methods: {\n    btoa (input) {\n      return window.btoa(input)\n    }\n  }\n}\n</script>\n<style scoped>\ng rect {\n  fill: white;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ArucoMarker.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('svg',{ref:\"svg\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 7 7\",\"preserveAspectRatio\":\"meet xMidYMid\"},on:{\"click\":function($event){_vm.id++}}},[_c('rect',{attrs:{\"x\":\"0\",\"y\":\"0\",\"width\":\"7\",\"height\":\"7\"}}),_vm._v(\" \"),_c('g',{attrs:{\"transform\":\"translate(1,1)\"}},_vm._l((_vm.matrix),function(pos,index){return (pos === 1)?_c('rect',{key:index,attrs:{\"x\":index % 5,\"y\":~~(index / 5),\"width\":\"1\",\"height\":\"1\"}}):_vm._e()}))]),_vm._v(\" \"),(this.$refs.svg)?_c('img',{attrs:{\"alt\":\"bla\",\"title\":\"bla\",\"width\":\"100\",\"height\":\"100\",\"src\":'data:image/svg+xml;base64,' + _vm.btoa(this.$refs.svg.outerHTML)}}):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1212cb78\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ArucoMarker.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1212cb78\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ArucoMarker.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ArucoMarker.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ArucoMarker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1212cb78\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ArucoMarker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1212cb78\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ArucoMarker.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <video ref=\"video\" style=\"display:none\"></video>\n    <canvas ref=\"canvas\"></canvas>\n  </div>\n</template>\n\n<script>\nimport WebcamFeed from './lib/WebcamFeed'\nimport AR from './lib/AR'\nimport POS from './lib/POS'\nimport ArucoMarker from './components/ArucoMarker'\n\nlet detector = new AR.Detector()\nlet poser\nexport default {\n  name: 'App',\n  components: {\n    ArucoMarker\n  },\n  mounted () {\n    let feed = new WebcamFeed()\n    feed.requestWebcamFeed().then(stream => {\n      console.log(stream)\n      this.$refs.video.srcObject = stream\n    }).then(() => {\n      return new Promise(resolve => {\n        this.$refs.video.onloadedmetadata = resolve\n      })\n    }).then(() => {\n      this.ratio = this.$refs.video.videoWidth / this.$refs.video.videoHeight\n      console.log(this.$refs.video.videoWidth, this.$refs.video.videoHeight, this.ratio)\n      this.resizeCanvas()\n    }).then(() => {\n      this.$refs.video.play()\n      this.draw()\n    })\n\n    window.addEventListener('resize', () => this.resizeCanvas())\n  },\n  data () {\n    return {\n      scale: undefined,\n      offsetX: undefined,\n      offsetY: undefined\n    }\n  },\n  methods: {\n    resizeCanvas () {\n      this.$refs.canvas.width = window.innerWidth\n      this.$refs.canvas.height = window.innerHeight\n      this.scale = Math.min(this.$refs.canvas.width / this.$refs.video.videoWidth, this.$refs.canvas.height / this.$refs.video.videoHeight)\n\n      this.offsetX = (this.$refs.canvas.width - this.$refs.video.videoWidth * this.scale) / 2\n      this.offsetY = (this.$refs.canvas.height - this.$refs.video.videoHeight * this.scale) / 2\n      poser = new POS.Posit(350, this.$refs.canvas.width)\n    },\n    draw () {\n      requestAnimationFrame(() => this.draw())\n      let context = this.$refs.canvas.getContext('2d')\n      context.clearRect(0, 0, this.$refs.canvas.width, this.$refs.canvas.height)\n      this.$refs.canvas.getContext('2d').drawImage(this.$refs.video, this.offsetX, this.offsetY, this.$refs.video.videoWidth * this.scale, this.$refs.video.videoHeight * this.scale)\n      let image = context.getImageData(this.offsetX, this.offsetY, this.$refs.canvas.width, this.$refs.canvas.height)\n      let markers = detector.detect(image)\n      if (markers && markers.length > 0) {\n        markers.forEach(m => {\n          context.beginPath()\n          context.lineWidth = 10\n          context.moveTo(this.offsetX + m.corners[0].x, this.offsetY + m.corners[0].y)\n          for (let i = 1; i < 4; i++) {\n            context.lineTo(this.offsetX + m.corners[i].x, this.offsetY + m.corners[i].y)\n          }\n          context.closePath()\n          context.strokeStyle = 'red'\n          context.stroke()\n          context.font = '16px Consolas'\n          console.log(m)\n          context.fillText(m.id, this.offsetX + m.corners[0].x - 5, this.offsetY + m.corners[0].y - 5)\n\n          let pos = poser.pose(m.corners)\n\n          context.fillStyle = 'blue'\n          let rotation = [-Math.asin(-pos.bestRotation[1][2]), -Math.atan2(pos.bestRotation[0][2], pos.bestRotation[2][2]), Math.atan2(pos.bestRotation[1][0], pos.bestRotation[1][1])]\n          context.fillText('Position: ' + pos.bestTranslation.map(n => n.toFixed(2)), 10, 50)\n          context.fillText('Rotation: ' + rotation.map(n => n.toFixed(2)), 10, 70)\n        })\n      } else {\n        context.font = '30px Consolas'\n        context.fillStyle = 'blue'\n        context.fillText('No markers detected', 10, 50)\n      }\n    }\n  }\n}\n</script>\n\n<style>\n* {\n  padding: 0;\n  margin: 0;\n}\n\ncanvas {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n\n.marker {\n  width: 300px;\n  height: 300px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('video',{ref:\"video\",staticStyle:{\"display\":\"none\"}}),_vm._v(\" \"),_c('canvas',{ref:\"canvas\"})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5863beff\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5863beff\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5863beff\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nrequire('webrtc-adapter/out/adapter')\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}